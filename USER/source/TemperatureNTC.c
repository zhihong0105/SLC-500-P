#include "TemperatureNTC.h"
 /*************************************************
  Temperature resistance table
	Vcc = 5.0V
	Rup = 103F3450
	Rdown = 10k
	ADC = 10bit
 **************************************************/
const unsigned int TempTable[156] = 
{  26,27,29,31 ,33 ,35 ,37 ,39 ,41 ,44 ,46 ,49 ,52 ,55   //11+3
  ,58 ,61 ,64 ,68 ,71 ,75 ,79 ,83 ,88 ,92 ,97 ,101       //11+1
  ,106 ,111 ,117 ,122 ,128 ,134 ,140 ,146 ,152 ,159 ,166 //11
  ,173 ,180 ,187 ,195 ,203 ,211 ,219 ,227 ,235 ,244 ,253 
  ,261 ,271 ,280 ,289 ,298 ,308 ,318 ,327 ,337 ,347 ,357 
  ,367 ,377 ,388 ,398 ,408 ,419 ,429 ,440 ,450 ,460 ,470 
  ,481 ,491 ,501 ,511 ,521 ,532 ,541 ,551 ,562 ,571 ,581 
  ,591 ,599 ,609 ,618 ,627 ,636 ,645 ,654 ,662 ,670 ,679 
  ,688 ,695 ,703 ,711 ,718 ,726 ,733 ,740 ,747 ,754 ,760 
  ,768 ,774 ,780 ,786 ,792 ,798 ,803 ,809 ,814 ,820 ,826 
  ,830 ,836 ,840 ,844 ,849 ,853 ,858 ,863 ,866 ,870 ,873
  ,878 ,881 ,885 ,890 ,893 ,896 ,900 ,902 ,905 ,908 ,912 
  ,913 ,917 ,920 ,922 ,924 ,927 ,929 ,931 ,935 ,936 ,938 
  ,940 ,942 ,944 ,947 ,949 ,951 ,951 ,953};             //8

 
/*******************************************************************************
* Function Name : TemperatureCalculate
* Description   : TemperatureCalculate.
* Input         : iAD_Data：AD转换结果
* Output        : None.
* Return        : 温度值（℃）
*******************************************************************************/
signed char TemperatureCalculate( unsigned short int iAD_Data)
{
  signed short int iTempIndex;
    /* Calculate temperature from the table */
  for(iTempIndex = 0;iTempIndex<151;iTempIndex++){ 
    if(iAD_Data < TempTable[iTempIndex])
      break;
  }
  return (signed char)(iTempIndex - 30);
}
